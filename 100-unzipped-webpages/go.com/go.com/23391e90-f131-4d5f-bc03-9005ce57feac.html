new ((function r(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var
n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw console.error(e),e};var r=t(t.s="./src/demux/demuxer-worker.js");return
r.default||r})({"./src/demux/demuxer-worker.js": function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),i=n(/*! ../events */"./src/events.js"),a=n(/*! ../utils/logger
*/"./src/utils/logger.js"),o=n(/*! events */"./node_modules/node-libs-browser/node_modules/events/events.js"),s=function(e){var t=new o.EventEmitter;t.trigger=function(e){for(var n=[],r=1;r
<arguments.length;r++)n[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var
    n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(n))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener( "message",function(i){var o=i.data;switch(o.cmd){case "init":var s=JSON.parse(o.config);e.demuxer=new
    r.default(t,o.typeSupported,s,o.vendor),a.enableLogs(s.debug),n( "init",null);break;case "demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),t.on(i.default.FRAG_DECRYPTED,n),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(i.default.FRAG_PARSED,n),t.on(i.default.ERROR,n),t.on(i.default.FRAG_PARSING_METADATA,n),t.on(i.default.FRAG_PARSING_USERDATA,n),t.on(i.default.INIT_PTS_FOUND,n),t.on(i.default.FRAG_PARSING_DATA,function(t,n){var
    r=[],i={event:t,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),e.postMessage(i,r)})};t.default=s},
    "./node_modules/node-libs-browser/node_modules/events/events.js": function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return "function"==typeof e}function i(e){return "number"==typeof e}function a(e){return "object"==typeof e&&null!==e}function o(e){return
    void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError( "n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var
    t,n,i,s,l,u;if(this._events||(this._events={}), "error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error( 'Uncaught, unspecified "error" event. ('+t+ ")");throw
    c.context=t,c}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else
    if(a(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),i=u.length,l=0;l<i;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError( "listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit(
    "newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function
    n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,s;if(!r(t))throw TypeError("listener
    must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s--
    >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i
    <0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit( "removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var
        t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events) "removeListener"!==t&&this.removeAllListeners(t);return
        this.removeAllListeners( "removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return
        this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return
        e.listenerCount(t)}}, "./src/utils/logger.js": function(e,t,n){ "use strict";function r(){}function i(e,t){return t="[" +e+ "] > "+t}function a(e){var t=c.console[e];return t?function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];n[0]&&(n[0]=i(e,n[0])),t.apply(c.console,n)}:r}function
        o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];t.forEach(function(t){u[t]=e[t]?e[t].bind(e):a(t)})}Object.defineProperty(t, "__esModule",{value:!0});var s=n(/*! ./get-self-scope */ "./src/utils/get-self-scope.js"),l={trace:r,debug:r,log:r,warn:r,info:r,error:r},u=l,c=s.getSelfScope();t.enableLogs=function(e){if(!0===e||
        "object"==typeof e){o(e, "debug", "log", "info", "warn", "error");try{u.log()}catch(e){u=l}}else u=l},t.logger=u}, "./src/utils/get-self-scope.js": function(e,t,n){ "use strict";function r(){return "undefined"==typeof window?self:window}Object.defineProperty(t,
        "__esModule",{value:!0}),t.getSelfScope=r}, "./src/events.js": function(e,t,n){ "use strict";Object.defineProperty(t, "__esModule",{value:!0});var r={MEDIA_ATTACHING: "hlsMediaAttaching",MEDIA_ATTACHED: "hlsMediaAttached",MEDIA_DETACHING: "hlsMediaDetaching",MEDIA_DETACHED:
        "hlsMediaDetached",BUFFER_RESET: "hlsBufferReset",BUFFER_CODECS: "hlsBufferCodecs",BUFFER_CREATED: "hlsBufferCreated",BUFFER_APPENDING: "hlsBufferAppending",BUFFER_APPENDED: "hlsBufferAppended",BUFFER_EOS: "hlsBufferEos",BUFFER_FLUSHING: "hlsBufferFlushing",BUFFER_FLUSHED:
        "hlsBufferFlushed",MANIFEST_LOADING: "hlsManifestLoading",MANIFEST_LOADED: "hlsManifestLoaded",MANIFEST_PARSED: "hlsManifestParsed",LEVEL_SWITCHING: "hlsLevelSwitching",LEVEL_SWITCHED: "hlsLevelSwitched",LEVEL_LOADING: "hlsLevelLoading",LEVEL_LOADED:
        "hlsLevelLoaded",LEVEL_UPDATED: "hlsLevelUpdated",LEVEL_PTS_UPDATED: "hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED: "hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING: "hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED: "hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:
        "hlsAudioTrackLoading",AUDIO_TRACK_LOADED: "hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED: "hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH: "hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING: "hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED: "hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:
        "hlsSubtitleFragProcessed",INIT_PTS_FOUND: "hlsInitPtsFound",FRAG_LOADING: "hlsFragLoading",FRAG_LOAD_PROGRESS: "hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED: "hlsFragLoadEmergencyAborted",FRAG_LOADED: "hlsFragLoaded",FRAG_DECRYPTED: "hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:
        "hlsFragParsingInitSegment",FRAG_PARSING_USERDATA: "hlsFragParsingUserdata",FRAG_PARSING_METADATA: "hlsFragParsingMetadata",FRAG_PARSING_DATA: "hlsFragParsingData",FRAG_PARSED: "hlsFragParsed",FRAG_BUFFERED: "hlsFragBuffered",FRAG_CHANGED: "hlsFragChanged",FPS_DROP:
        "hlsFpsDrop",FPS_DROP_LEVEL_CAPPING: "hlsFpsDropLevelCapping",ERROR: "hlsError",DESTROYING: "hlsDestroying",KEY_LOADING: "hlsKeyLoading",KEY_LOADED: "hlsKeyLoaded",STREAM_STATE_TRANSITION: "hlsStreamStateTransition"};t.default=r},
        "./src/demux/demuxer-inline.js": function(e,t,n){ "use strict";Object.defineProperty(t, "__esModule",{value:!0});var r,i=n(/*! ../events */ "./src/events.js"),a=n(/*! ../errors */ "./src/errors.js"),o=n(/*! ../crypt/decrypter */ "./src/crypt/decrypter.js"),s=n(/*! ../demux/aacdemuxer
        */ "./src/demux/aacdemuxer.js"),l=n(/*! ../demux/mp4demuxer */ "./src/demux/mp4demuxer.js"),u=n(/*! ../demux/tsdemuxer */ "./src/demux/tsdemuxer.js"),c=n(/*! ../demux/mp3demuxer */ "./src/demux/mp3demuxer.js"),p=n(/*! ../remux/mp4-remuxer */
        "./src/remux/mp4-remuxer.js"),f=n(/*! ../remux/passthrough-remuxer */ "./src/remux/passthrough-remuxer.js"),d=n(/*! ../utils/get-self-scope */ "./src/utils/get-self-scope.js"),h=n(/*! ../utils/logger */ "./src/utils/logger.js"),y=d.getSelfScope();try{r=y.performance.now.bind(y.performance)}catch(e){h.logger.debug(
        "Unable to use Performance API on this environment"),r=y.Date.now}var v=function(){function e(e,t,n,r){this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,n,a,s,l,u,c,p,f,d,h){var y=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var v=this.decrypter;null==v&&(v=this.decrypter=new o.default(this.observer,this.config));var g=r();v.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var o=r();y.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:o}}),y.pushDecrypted(new
        Uint8Array(e),t,new Uint8Array(n),a,s,l,u,c,p,f,d,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),a,s,l,u,c,p,f,d,h)},e.prototype.pushDecrypted=function(e,t,n,r,o,d,h,y,v,g,m,b){var _=this.demuxer;if(!_||(h||y)&&!this.probe(e)){for(var
        E=this.observer,k=this.typeSupported,T=this.config,A=[{demux:u.default,remux:p.default},{demux:l.default,remux:f.default},{demux:s.default,remux:p.default},{demux:c.default,remux:p.default}],w=0,S=A.length;w
        <S;w++){var P=A[w],O=P.demux.probe;if(O(e)){var
            C=this.remuxer=new P.remux(E,T,k,this.vendor);_=new P.demux(E,C,T,k),this.probe=O;break}}if(!_)return void E.trigger(i.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:
            "no demux matching with content found"});this.demuxer=_}var R=this.remuxer;(h||y)&&(_.resetInitSegment(n,r,o,g),R.resetInitSegment()),h&&(_.resetTimeStamp(b),R.resetTimeStamp(b)), "function"==typeof _.setDecryptData&&_.setDecryptData(t),_.append(e,d,v,m)},e}();t.default=v},
            "./src/remux/passthrough-remuxer.js": function(e,t,n){ "use strict";Object.defineProperty(t, "__esModule",{value:!0});var r=n(/*! ../events */ "./src/events.js"),i=function(){function e(e){this.observer=e}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,n,i,a,o,s,l){var
            u=this.observer,c="" ;e&&(c+="audio" ),t&&(c+="video" ),u.trigger(r.default.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(r.default.FRAG_PARSED)},e}();t.default=i},
            "./src/remux/mp4-remuxer.js": function(e,t,n){ "use strict";Object.defineProperty(t, "__esModule",{value:!0});var r=n(/*! ./aac-helper */ "./src/remux/aac-helper.js"),i=n(/*! ./mp4-generator */ "./src/remux/mp4-generator.js"),a=n(/*! ../events */ "./src/events.js"),o=n(/*!
            ../errors */ "./src/errors.js"),s=n(/*! ../utils/logger */ "./src/utils/logger.js"),l=function(){function e(e,t,n,r){this.observer=e,this.config=t,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=r&&r.indexOf( "Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,n,r,i,o,l){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var
            u=e.samples.length,c=t.samples.length,p=i,f=i;if(u&&c){var d=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;p+=Math.max(0,d),f+=Math.max(0,-d)}if(u){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var
            h=this.remuxAudio(e,p,o,l);if(c){var y=void 0;h&&(y=h.endPTS-h.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,f,o,y,l)}}else if(c){var v=this.remuxVideo(t,f,o,0,l);v&&e.codec&&this.remuxEmptyAudio(e,p,o,v)}}n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(a.default.FRAG_PARSED)},e.prototype.generateIS=function(e,t,n){var
            r,l,u=this.observer,c=e.samples,p=t.samples,f=this.typeSupported,d="audio/mp4",h={},y={tracks:h},v=void 0===this._initPTS;if(v&&(r=l=1/0),e.config&&c.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(f.mpeg?(d="audio/mpeg",e.codec=""):f.mp3&&(e.codec="mp3")),h.audio={container:d,codec:e.codec,initSegment:!e.isAAC&&f.mpeg?new
            Uint8Array:i.default.initSegment([e]),metadata:{channelCount:e.channelCount}},v&&(r=l=c[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&p.length){var g=t.inputTimeScale;t.timescale=g,h.video={container:"video/mp4",codec:t.codec,initSegment:i.default.initSegment([t]),metadata:{width:t.width,height:t.height}},v&&(r=Math.min(r,p[0].pts-g*n),l=Math.min(l,p[0].dts-g*n),this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:r}))}Object.keys(h).length?(u.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,y),this.ISGenerated=!0,v&&(this._initPTS=r,this._initDTS=l)):u.trigger(a.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no
            audio/video samples found"})},e.prototype.remuxVideo=function(e,t,n,r,l){var u,c,p,f,d,h,y,v=8,g=e.timescale,m=e.samples,b=[],_=m.length,E=this._PTSNormalize,k=this._initPTS,T=this.nextAvcDts,A=this.isSafari;if(0!==_){A&&(n|=m.length&&T&&(l&&Math.abs(t-T/g)
            <.1||Math.abs(m[0].pts-T-k)<g/5)),n||(T=t*g),m.forEach(function(e){e.pts=E(e.pts-k,T),e.dts=E(e.dts-k,T)}),m.sort(function(e,t){var
                n=e.dts-t.dts,r=e.pts-t.pts;return n||r||e.id-t.id});var w=m.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(w<0){s.logger.warn( "PTS < DTS detected in video samples, shifting DTS by "+Math.round(w/90)+
                " ms to overcome this issue");for(var S=0;S<m.length;S++)m[S].dts+=w}var P=m[0];d=Math.max(P.dts,0),f=Math.max(P.pts,0);var O=Math.round((d-T)/90);n&&O&&(O>1?s.logger.log("AVC:"+O+" ms hole between fragments detected,filling it"):O
                <-1&&s.logger.log( "AVC:"+-O+ " ms overlapping between fragments detected"),d=T,m[0].dts=d,f=Math.max(f-O,T),m[0].pts=f,s.logger.log( "Video/PTS/DTS adjusted: "+Math.round(f/90)+
                    "/"+Math.round(d/90)+ ",delta:"+O+ " ms")),P=m[m.length-1],y=Math.max(P.dts,0),h=Math.max(P.pts,0,y),A&&(u=Math.round((y-d)/(m.length-1)));for(var C=0,R=0,S=0;S<_;S++){for(var x=m[S],I=x.units,D=I.length,M=0,L=0;L<D;L++)M+=I[L].data.length;R+=M,C+=D,x.length=M,x.dts=A?d+S*u:Math.max(x.dts,d),x.pts=Math.max(x.pts,x.dts)}var
                    N=R+4*C+8;try{c=new Uint8Array(N)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason: "fail allocating video mdat "+N})}var j=new DataView(c.buffer);j.setUint32(0,N),c.set(i.default.types.mdat,4);for(var
                    S=0;S<_;S++){for(var U=m[S],F=U.units,B=0,G=void 0,L=0,D=F.length;L<D;L++){var V=F[L],H=V.data,K=V.data.byteLength;j.setUint32(v,K),v+=4,c.set(H,v),v+=K,B+=4+K}if(A)G=Math.max(0,u*Math.round((U.pts-U.dts)/u));else{if(S<_-1)u=m[S+1].dts-U.dts;else{var
                    Y=this.config,z=U.dts-m[S>0?S-1:S].dts;if(Y.stretchShortVideoTrack){var W=Y.maxBufferHole,q=Math.floor(W*g),X=(r?f+r*g:this.nextAudioPts)-U.pts;X>q?(u=X-z,u
                    <0&&(u=z),s.logger.log( "It is approximately "+X/90+ " ms to the next segment; using duration "+u/90+
                        " ms for the last video frame.")):u=z}else u=z}G=Math.round(U.pts-U.dts)}b.push({size:B,duration:u,cts:G,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:U.key?2:1,isNonSync:U.key?0:1}})}this.nextAvcDts=y+u;var Q=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf(
                        "chrome")>-1){var J=b[0].flags;J.dependsOn=2,J.isNonSync=0}e.samples=b,p=i.default.moof(e.sequenceNumber++,d,e),e.samples=[];var $={data1:p,data2:c,startPTS:f/g,endPTS:(h+u)/g,startDTS:d/g,endDTS:this.nextAvcDts/g,type:"video",hasAudio:!1,hasVideo:!0,nb:b.length,dropped:Q};return
                        this.observer.trigger(a.default.FRAG_PARSING_DATA,$),$}},e.prototype.remuxAudio=function(e,t,n,l){var u,c,p,f,d,h,y,v=e.inputTimeScale,g=e.timescale,m=v/g,b=e.isAAC?1024:1152,_=b*m,E=this._PTSNormalize,k=this._initPTS,T=!e.isAAC&&this.typeSupported.mpeg,A=e.samples,w=[],S=this.nextAudioPts;if(n|=A.length&&S&&(l&&Math.abs(t-S/v)
                        <.1||Math.abs(A[0].pts-S-k)<20*_),A.forEach(function(e){e.pts=e.dts=E(e.pts-k,t*v)}),A=A.filter(function(e){return
                            e.pts>=0}),0!==A.length){if(n||(S=l?t*v:A[0].pts),e.isAAC)for(var P=this.config.maxAudioFramesDrift,O=0,C=S;O
                            <A.length;){var R,x=A[O],I=x.pts;R=I-C;var D=Math.abs(1e3*R/v);if(R<=-P*_)s.logger.warn( "Dropping 1 audio frame @ "+(C/v).toFixed(3)+
                                "s due to "+Math.round(D)+ " ms overlap."),A.splice(O,1),e.len-=x.unit.length;else if(R>=P*_&&D
                                <1e4&&C){var M=Math.round(R/_);s.logger.warn( "Injecting "+M+ " audio frame @ "+(C/v).toFixed(3)+ "s due to "+Math.round(1e3*R/v)+ " ms gap.");for(var L=0;L<M;L++){var N=Math.max(C,0);p=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),p||(s.logger.log(
                                    "Unable to get silent frame for given audio codec; duplicating last frame instead."),p=x.unit.subarray()),A.splice(O,0,{unit:p,pts:N,dts:N}),e.len+=p.length,C+=_,O++}x.pts=x.dts=C,C+=_,O++}else Math.abs(R),x.pts=x.dts=C,C+=_,O++}for(var L=0,j=A.length;L<j;L++){var U=A[L],F=U.unit,I=U.pts;if(void 0!==y)c.duration=Math.round((I-y)/m);else{var
                                    B=Math.round(1e3*(I-S)/v),G=0;if(n&&e.isAAC&&B){if(B>0&&B
                                    <1e4)G=Math.round((I-S)/_),s.logger.log(B+ " ms hole between AAC samples detected,filling it"),G>0&&(p=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),p||(p=F.subarray()),e.len+=G*p.length);else if(B
                                        <-12){s.logger.log( "drop overlapping AAC sample, expected/parsed/delta:"+(S/v).toFixed(3)+
                                            "s/"+(I/v).toFixed(3)+ "s/"+-B+ "ms"),e.len-=F.byteLength;continue}I=S}if(h=I,!(e.len>0))return;var V=T?e.len:e.len+8;u=T?0:8;try{f=new Uint8Array(V)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:V,reason:"fail
                                            allocating audio mdat "+V})}if(!T){new DataView(f.buffer).setUint32(0,V),f.set(i.default.types.mdat,4)}for(var O=0;O
                                            <G;O++)p=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),p||(s.logger.log(
                                                "Unable to get silent frame for given audio codec; duplicating this frame instead."),p=F.subarray()),f.set(p,u),u+=p.byteLength,c={size:p.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(c)}f.set(F,u);var H=F.byteLength;u+=H,c={size:H,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(c),y=I}var
                                                K=0,Y=w.length;if(Y>=2&&(K=w[Y-2].duration,c.duration=K),Y){this.nextAudioPts=S=y+m*K,e.len=0,e.samples=w,d=T?new Uint8Array:i.default.moof(e.sequenceNumber++,h/m,e),e.samples=[];var z=h/v,W=S/v,q={data1:d,data2:f,startPTS:z,endPTS:W,startDTS:z,endDTS:W,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return
                                                this.observer.trigger(a.default.FRAG_PARSING_DATA,q),q}return null}},e.prototype.remuxEmptyAudio=function(e,t,n,i){var a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,u=this.nextAudioPts,c=(void 0!==u?u:i.startDTS*a)+this._initDTS,p=i.endDTS*a+this._initDTS,f=1024*l,d=Math.ceil((p-c)/f),h=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux
                                                empty Audio"),!h)return void s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var y=[],v=0;v
                                                <d;v++){var g=c+v*f;y.push({unit:h,pts:g,dts:g}),e.len+=h.length}e.samples=y,this.remuxAudio(e,t,n)},e.prototype.remuxID3=function(e){var
                                                    t,n=e.samples.length,r=e.inputTimeScale,i=this._initPTS,o=this._initDTS;if(n){for(var s=0;s<n;s++)t=e.samples[s],t.pts=(t.pts-i)/r,t.dts=(t.dts-o)/r;this.observer.trigger(a.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e){e.samples.sort(function(e,t){return
                                                    e.pts-t.pts});var t,n=e.samples.length,r=e.inputTimeScale,i=this._initPTS;if(n){for(var o=0;o<n;o++)t=e.samples[o],t.pts=(t.pts-i)/r;this.observer.trigger(a.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var
                                                    n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}();t.default=l},"./src/errors.js": function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},t.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/remux/mp4-generator.js":
                                                    function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var
                                                    t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new
                                                    Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new
                                                    Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new
                                                    Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var
                                                    t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,a=i;i--;)r+=n[i].byteLength;for(t=new Uint8Array(r),t[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i
                                                    <a;i++)t.set(n[i],r),r+=n[i].byteLength;return
                                                        t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1));return e.box(e.types.mdhd,new
                                                        Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return
                                                        e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,r){return
                                                        e.box(e.types.moof,e.mfhd(t),e.traf(r,n))},e.moov=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))},e.mvex=function(t){for(var
                                                        n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return
                                                        e.box(e.types.mvhd,o)},e.sdtp=function(t){var n,r,i=t.samples||[],a=new Uint8Array(4+i.length);for(r=0;r
                                                        <i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return
                                                            e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,r,i,a=[],o=[];for(n=0;n<t.sps.length;n++)r=t.sps[n],i=r.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n
                                                            <t.pps.length;n++)r=t.pps[n],i=r.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,c=t.pixelRatio[0],p=t.pixelRatio[1];return
                                                                e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new
                                                                Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,p>>24,p>>16&255,p>>8&255,255&p])))},e.esds=function(e){var t=e.config.length;return
                                                                new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new
                                                                Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new
                                                                Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var
                                                                n=t.id,i=t.duration*t.timescale,a=t.width,o=t.height,s=Math.floor(i/(r+1)),l=Math.floor(i%(r+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,o>>8&255,255&o,0,0]))},e.traf=function(t,n){var
                                                                i=e.sdtp(t),a=t.id,o=Math.floor(n/(r+1)),s=Math.floor(n%(r+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new
                                                                Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var
                                                                n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var r,i,a,o,s,l,u=t.samples||[],c=u.length,p=12+16*c,f=new
                                                                Uint8Array(p);for(n+=8+p,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r
                                                                <c;r++)i=u[r],a=i.duration,o=i.size,s=i.flags,l=i.cts,f.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading
                                                                    <<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var n,r=e.moov(t);return n=new Uint8Array(e.FTYP.byteLength+r.byteLength),n.set(e.FTYP),n.set(r,e.FTYP.byteLength),n},e}();t.default=i},"./src/remux/aac-helper.js":
                                                                        function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return
                                                                        new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return
                                                                        new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return
                                                                        new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return
                                                                        new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return
                                                                        new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return
                                                                        null},e}();t.default=r},"./src/demux/mp3demuxer.js": function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(/*! ../demux/id3 */"./src/demux/id3.js"),i=n(/*!
                                                                        ../utils/logger */"./src/utils/logger.js"),a=n(/*! ./mpegaudio */"./src/demux/mpegaudio.js"),o=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}return e.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var
                                                                        t,n,o=r.default.getID3Data(e,0);if(o&&void 0!==r.default.getTimeStamp(o))for(t=o.length,n=Math.min(e.length-1,t+100);t
                                                                        <n;t++)if(a.default.probe(e,t))return i.logger.log(
                                                                            "MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,i){for(var o=r.default.getID3Data(e,0),s=r.default.getTimeStamp(o),l=s?90*s:9e4*t,u=o.length,c=e.length,p=0,f=0,d=this._audioTrack,h=[{pts:l,dts:l,data:o}];u<c;)if(a.default.isHeader(e,u)){var
                                                                            y=a.default.appendFrame(d,e,u,l,p);if(!y)break;u+=y.length,f=y.sample.pts,p++}else r.default.isHeader(e,u)?(o=r.default.getID3Data(e,u),h.push({pts:f,dts:f,data:o}),u+=o.length):u++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,n,i)},e.prototype.destroy=function(){},e}();t.default=o},
                                                                            "./src/demux/mpegaudio.js": function(e,t,n){ "use strict";Object.defineProperty(t, "__esModule",{value:!0});var r={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var a=this.parseHeader(t,n);if(a&&n+a.frameLength
                                                                            <=t.length){var o=9e4*a.samplesPerFrame/a.sampleRate,s=r+i*o,l={unit:t.subarray(n,n+a.frameLength),pts:s,dts:s};return
                                                                                e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(l),e.len+=a.frameLength,{sample:l,length:a.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,a=e[t+2]>>4&15,o=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==n&&0!==a&&15!==a&&3!==o){var l=3===n?3-i:3===i?3:4,u=1e3*r.BitratesMap[14*l+a-1],c=3===n?0:2===n?1:2,p=r.SamplingRateMap[3*c+o],f=e[t+3]>>6==3?1:2,d=r.SamplesCoefficients[n][i],h=r.BytesInSlot[i],y=8*d*h;return{sampleRate:p,channelCount:f,frameLength:parseInt(d*u/p+s,10)*h,samplesPerFrame:y}}},isHeaderPattern:function(e,t){return
                                                                                255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1
                                                                                <e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var
                                                                                    n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.default=r},
                                                                                    "./src/demux/id3.js": function(e,t,n){ "use strict";Object.defineProperty(t, "__esModule",{value:!0});var r=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return
                                                                                    t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var r=n,i=0;e.isHeader(t,n);){i+=10;i+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(i+=10),n+=i}if(i>0)return t.subarray(r,r+i)},e._readSize=function(e,t){var n=0;return n=(127&e[t])
                                                                                    <<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var
                                                                                        n=e.getID3Frames(t),r=0;r<n.length;r++){var i=n[r];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&& "PRIV"===e.key&&
                                                                                        "com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),r=e._readSize(t,4);return{type:n,size:r,data:t.subarray(10,10+r)}},e.getID3Frames=function(t){for(var
                                                                                        n=0,r=[];e.isHeader(t,n);){var i=e._readSize(t,n+6);n+=10;for(var a=n+i;n+8<a;){var o=e._getFrameData(t.subarray(n)),s=e._decodeFrame(o);s&&r.push(s),n+=o.size+10}e.isFooter(t,n)&&(n+=10)}return
                                                                                        r},e._decodeFrame=function(t){return "PRIV"===t.type?e._decodePrivFrame(t): "T"===t.type[0]?e._decodeTextFrame(t): "W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var
                                                                                        t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var
                                                                                        n=e._utf8ArrayToStr(t.data,!0),r=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:r.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if(
                                                                                        "TXXX"===t.type){var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if(
                                                                                        "WXXX"===t.type){if(t.size<2)return;var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var
                                                                                        a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);for(var n,r,i,a=e.length,o="" ,s=0;s<a;){if(0===(n=e[s++])&&t)return
                                                                                        o;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(n);break;case 12:case 13:r=e[s++],o+=String.fromCharCode((31&n)
                                                                                        <<6|63&r);break;case
                                                                                            14:r=e[s++],i=e[s++],o+=String.fromCharCode((15&n)<<12|(63&r)<<6|(63&i)<<0)}}return o},e}(),i=r._utf8ArrayToStr;t.utf8ArrayToStr=i,t.default=r},
                                                                                            "./src/demux/tsdemuxer.js": function(e,t,n){ "use strict";Object.defineProperty(t, "__esModule",{value:!0});var r=n(/*! ./adts */ "./src/demux/adts.js"),i=n(/*! ./mpegaudio */
                                                                                            "./src/demux/mpegaudio.js"),a=n(/*! ../events */ "./src/events.js"),o=n(/*! ./exp-golomb */ "./src/demux/exp-golomb.js"),s=n(/*! ./sample-aes */ "./src/demux/sample-aes.js"),l=n(/*! ../utils/logger
                                                                                            */ "./src/utils/logger.js"),u=n(/*! ../errors */ "./src/errors.js"),c={video:1,audio:2,id3:3,text:4},p=function(){function e(e,t,n,r){this.observer=e,this.config=n,this.typeSupported=r,this.remuxer=t,this.sampleAes=null}return
                                                                                            e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&& "SAMPLE-AES"===e.method?this.sampleAes=new s.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var
                                                                                            n=e._syncOffset(t);return!(n<0)&&(n&&l.logger.warn( "MPEG2-TS detected but first sync word found @ offset "+n+ ", junk ahead ?"),!0)},e._syncOffset=function(e){for(var
                                                                                            t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container: "video"===e||
                                                                                            "audio"===e? "video/mp2t":void 0,type:e,id:c[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped: "video"===e?0:void 0,isAAC: "audio"===e||void 0,duration:
                                                                                            "audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack( "video",i),this._audioTrack=e.createTrack(
                                                                                            "audio",i),this._id3Track=e.createTrack( "id3",i),this._txtTrack=e.createTrack( "text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,n,r,i){var
                                                                                            o,s,c,p,f,d=t.length,h=!1;this.contiguous=r;var y=this.pmtParsed,v=this._avcTrack,g=this._audioTrack,m=this._id3Track,b=v.pid,_=g.pid,E=m.pid,k=this._pmtId,T=v.pesData,A=g.pesData,w=m.pesData,S=this._parsePAT,P=this._parsePMT,O=this._parsePES,C=this._parseAVCPES.bind(this),R=this._parseAACPES.bind(this),x=this._parseMPEGPES.bind(this),I=this._parseID3PES.bind(this),D=e._syncOffset(t);for(d-=(d+D)%188,o=D;o<d;o+=188)if(71===t[o]){if(s=!!(64&t[o+1]),c=((31&t[o+1])<<8)+t[o+2],(48&t[o+3])>>4>1){if((p=o+5+t[o+4])===o+188)continue}else p=o+4;switch(c){case b:s&&(T&&(f=O(T))&&void 0!==f.pts&&C(f,!1),T={data:[],size:0}),T&&(T.data.push(t.subarray(p,o+188)),T.size+=o+188-p);break;case
                                                                                            _:s&&(A&&(f=O(A))&&void 0!==f.pts&&(g.isAAC?R(f):x(f)),A={data:[],size:0}),A&&(A.data.push(t.subarray(p,o+188)),A.size+=o+188-p);break;case E:s&&(w&&(f=O(w))&&void
                                                                                            0!==f.pts&&I(f),w={data:[],size:0}),w&&(w.data.push(t.subarray(p,o+188)),w.size+=o+188-p);break;case 0:s&&(p+=t[p]+1),k=this._pmtId=S(t,p);break;case k:s&&(p+=t[p]+1);var
                                                                                            M=P(t,p,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);b=M.avc,b>0&&(v.pid=b),_=M.audio,_>0&&(g.pid=_,g.isAAC=M.isAAC),E=M.id3,E>0&&(m.pid=E),h&&!y&&(l.logger.log("reparse
                                                                                            from beginning"),h=!1,o=D-188),y=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(a.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS
                                                                                            packet did not start with 0x47"});T&&(f=O(T))&&void 0!==f.pts?(C(f,!0),v.pesData=null):v.pesData=T,A&&(f=O(A))&&void 0!==f.pts?(g.isAAC?R(f):x(f),g.pesData=null):(A&&A.size&&l.logger.log("last
                                                                                            AAC PES packet truncated,might overlap between fragments"),g.pesData=A),w&&(f=O(w))&&void 0!==f.pts?(I(f),m.pesData=null):m.pesData=w,null==this.sampleAes?this.remuxer.remux(g,v,m,this._txtTrack,n,r,i):this.decryptAndRemux(g,v,m,this._txtTrack,n,r,i)},e.prototype.decryptAndRemux=function(e,t,n,r,i,a,o){if(e.samples&&e.isAAC){var
                                                                                            s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,r,i,a,o)})}else this.decryptAndRemuxAvc(e,t,n,r,i,a,o)},e.prototype.decryptAndRemuxAvc=function(e,t,n,r,i,a,o){if(t.samples){var
                                                                                            s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,r,i,a,o)})}else this.remuxer.remux(e,t,n,r,i,a,o)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void
                                                                                            0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])
                                                                                            <<8|e[t+11]},e.prototype._parsePMT=function(e,t,n,r){var i,a,o,s,u={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&e[t+1])<<8|e[t+2],a=t+3+i-4,o=(15&e[t+10])<<8|e[t+11],t+=12+o;t<a;){switch(s=(31&e[t+1])<<8|e[t+2],e[t]){case
                                                                                                207:if(!r){l.logger.log( "unkown stream type:"+e[t]);break}case 15:-1===u.audio&&(u.audio=s);break;case 21:-1===u.id3&&(u.id3=s);break;case 219:if(!r){l.logger.log(
                                                                                                "unkown stream type:"+e[t]);break}case 27:-1===u.avc&&(u.avc=s);break;case 3:case 4:n?-1===u.audio&&(u.audio=s,u.isAAC=!1):l.logger.log(
                                                                                                "MPEG audio found, not supported in this browser for now");break;case 36:l.logger.warn( "HEVC stream type found, not supported for now");break;default:l.logger.log( "unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return
                                                                                                u},e.prototype._parsePES=function(e){var t,n,r,i,a,o,s,u,c=0,p=e.data;if(!e||0===e.size)return null;for(;p[0].length<19&&p.length>1;){var f=new Uint8Array(p[0].length+p[1].length);f.set(p[0]),f.set(p[1],p[0].length),p[0]=f,p.splice(1,1)}if(t=p[0],1===(t[0]
                                                                                                <<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;n=t[7],192&n&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,o>4294967295&&(o-=8589934592),64&n?(s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,s>4294967295&&(s-=8589934592),o-s>54e5&&(l.logger.warn(Math.round((o-s)/9e4)+"s
                                                                                                    delta between PTS and DTS, align them"),o=s)):s=o),i=t[8],u=i+9,e.size-=u,a=new Uint8Array(e.size);for(var d=0,h=p.length;d
                                                                                                    <h;d++){t=p[d];var y=t.byteLength;if(u){if(u>y){u-=y;continue}t=t.subarray(u),y-=u,u=0}a.set(t,c),c+=y}return r&&(r-=i+3),{data:a,pts:o,dts:s,len:r}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var
                                                                                                        n=t.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&l.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var
                                                                                                        n,r,i,a=this,s=this._avcTrack,l=this._parseAVCNALu(e.data),u=this.avcSample,c=!1,p=this.pushAccesUnit.bind(this),f=function(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}};e.data=null,u&&l.length&&!s.audFound&&(p(u,s),u=this.avcSample=f(!1,e.pts,e.dts,"")),l.forEach(function(t){switch(t.type){case
                                                                                                        1:r=!0,u||(u=a.avcSample=f(!0,e.pts,e.dts,"")),u.frame=!0;var l=t.data;if(c&&l.length>4){var d=new o.default(l).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(u.key=!0)}break;case
                                                                                                        5:r=!0,u||(u=a.avcSample=f(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:r=!0,n=new o.default(a.discardEPB(t.data)),n.readUByte();for(var h=0,y=0,v=!1,g=0;!v&&n.bytesAvailable>1;){h=0;do{g=n.readUByte(),h+=g}while(255===g);y=0;do{g=n.readUByte(),y+=g}while(255===g);if(4===h&&0!==n.bytesAvailable){v=!0;if(181===n.readUByte()){if(49===n.readUShort()){if(1195456820===n.readUInt()){if(3===n.readUByte()){var
                                                                                                        m=n.readUByte(),b=n.readUByte(),_=31&m,E=[m,b];for(i=0;i
                                                                                                        <_;i++)E.push(n.readUByte()),E.push(n.readUByte()),E.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:E})}}}}}else
                                                                                                            if(y<n.bytesAvailable)for(i=0;i<y;i++)n.readUByte()}break;case 7:if(r=!0,c=!0,!s.sps){n=new o.default(t.data);var k=n.readSPS();s.width=k.width,s.height=k.height,s.pixelRatio=k.pixelRatio,s.sps=[t.data],s.duration=a._duration;var
                                                                                                            T=t.data.subarray(1,4),A="avc1." ;for(i=0;i<3;i++){var w=T[i].toString(16);w.length<2&&(w="0" +w),A+=w}s.codec=A}break;case 8:r=!0,s.pps||(s.pps=[t.data]);break;case
                                                                                                            9:r=!1,s.audFound=!0,u&&p(u,s),u=a.avcSample=f(!1,e.pts,e.dts, "");break;case 12:r=!1;break;default:r=!1,u&&(u.debug+="unknown NAL " +t.type+ " ")}if(u&&r){u.units.push(t)}}),t&&u&&(p(u,s),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var
                                                                                                            n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts
                                                                                                            <e[r].pts){e.splice(r,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var
                                                                                                                e,t=this.avcSample;if(!t||0===t.units.length){var n=this._avcTrack,r=n.samples;t=r[r.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},e.prototype._parseAVCNALu=function(e){var
                                                                                                                t,n,r,i,a,o=0,s=e.byteLength,l=this._avcTrack,u=l.naluState||0,c=u,p=[],f=-1;for(-1===u&&(f=0,a=31&e[0],u=0,o=1);o<s;)if(t=e[o++],u)if(1!==u)if(t)if(1===t){if(f>=0)r={data:e.subarray(f,o-u-1),type:a},p.push(r);else{var d=this._getLastNalUnit();if(d&&(c&&o
                                                                                                                <=4-c&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-c)),(n=o-u-1)>0)){var h=new Uint8Array(d.data.byteLength+n);h.set(d.data,0),h.set(e.subarray(0,n),d.data.byteLength),d.data=h}}o
                                                                                                                    <s?(i=31&e[o],f=o,a=i,u=0):u=-1}else
                                                                                                                        u=0;else u=3;else u=t?0:2;else u=t?0:1;if(f>=0&&u>=0&&(r={data:e.subarray(f,s),type:a,state:u},p.push(r)),0===p.length){var d=this._getLastNalUnit();if(d){var h=new Uint8Array(d.data.byteLength+e.byteLength);h.set(d.data,0),h.set(e,d.data.byteLength),d.data=h}}return
                                                                                                                        l.naluState=u,p},e.prototype.discardEPB=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a
                                                                                                                        <r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return
                                                                                                                            e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},e.prototype._parseAACPES=function(e){var
                                                                                                                            t,n,i,o,s,c=this._audioTrack,p=e.data,f=e.pts,d=this.aacOverFlow,h=this.aacLastPTS;if(d){var y=new Uint8Array(d.byteLength+p.byteLength);y.set(d,0),y.set(p,d.byteLength),p=y}for(i=0,s=p.length;i<s-1&&!r.isHeader(p,i);i++);if(i){var
                                                                                                                            v=void 0,g=void 0;if(i<s-1?(v="AAC PES did not start with ADTS header,offset:" +i,g=!1):(v="no ADTS header found in AAC PES" ,g=!0),l.logger.warn(
                                                                                                                            "parsing error:"+v),this.observer.trigger(a.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:g,reason:v}),g)return}if(r.initTrackConfig(c,this.observer,p,i,this.audioCodec),n=0,t=r.getFrameDuration(c.samplerate),d&&h){var
                                                                                                                            m=h+t;Math.abs(m-f)>1&&(l.logger.log("AAC: align PTS for overlapping frames by "+Math.round((m-f)/90)),f=m)}for(;i
                                                                                                                            <s;)if(r.isHeader(p,i)&&i+5<s){var b=r.appendFrame(c,p,i,f,n);if(!b)break;i+=b.length,o=b.sample.pts,n++}else
                                                                                                                                i++;d=i<s?p.subarray(i,s):null,this.aacOverFlow=d,this.aacLastPTS=o},e.prototype._parseMPEGPES=function(e){for(var t=e.data,n=t.length,r=0,a=0,o=e.pts;a<n;)if(i.default.isHeader(t,a)){var
                                                                                                                                s=i.default.appendFrame(this._audioTrack,t,a,o,r);if(!s)break;a+=s.length,r++}else a++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();t.default=p},
                                                                                                                                "./src/demux/sample-aes.js": function(e,t,n){ "use strict";Object.defineProperty(t, "__esModule",{value:!0});var r=n(/*! ../crypt/decrypter */
                                                                                                                                "./src/crypt/decrypter.js"),i=function(){function e(e,t,n,i){this.decryptdata=n,this.discardEPB=i,this.decrypter=new r.default(e,t,{removePKCS7Padding:!1})}return
                                                                                                                                e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,n,r){var
                                                                                                                                i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,function(a){a=new
                                                                                                                                Uint8Array(a),i.set(a,16),r||s.decryptAacSamples(e,t+1,n)})},e.prototype.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length
                                                                                                                                <32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},e.prototype.getAvcEncryptedData=function(e){for(var
                                                                                                                                    t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return
                                                                                                                                    n},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return
                                                                                                                                    e},e.prototype.decryptAvcSample=function(e,t,n,r,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,function(s){i.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(e,t,n+1,r)})},e.prototype.decryptAvcSamples=function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var a=i[n];if(!(a.length
                                                                                                                                    <=48||1!==a.type&&5!==a.type)){var
                                                                                                                                        o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,a,o),!o)return}}}},e}();t.default=i},
                                                                                                                                        "./src/crypt/decrypter.js": function(e,t,n){ "use strict";Object.defineProperty(t, "__esModule",{value:!0});var r=n(/*! ./aes-crypto */
                                                                                                                                        "./src/crypt/aes-crypto.js"),i=n(/*! ./fast-aes-key */ "./src/crypt/fast-aes-key.js"),a=n(/*! ./aes-decryptor */ "./src/crypt/aes-decryptor.js"),o=n(/*!
                                                                                                                                        ../errors */ "./src/errors.js"),s=n(/*! ../utils/logger */ "./src/utils/logger.js"),l=n(/*! ../events */
                                                                                                                                        "./src/events.js"),u=n(/*! ../utils/get-self-scope */ "./src/utils/get-self-scope.js"),c=u.getSelfScope(),p=function(){function e(e,t,n){var
                                                                                                                                        r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var
                                                                                                                                        a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return
                                                                                                                                        this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,n,o){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log(
                                                                                                                                        "JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new a.default),u.expandKey(t),o(u.decrypt(e,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log(
                                                                                                                                        "WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i.default(c,t)),this.fastAesKey.expandKey().then(function(i){new
                                                                                                                                        r.default(c,n).decrypt(e,i).catch(function(r){l.onWebCryptoError(r,e,t,n,o)}).then(function(e){o(e)})}).catch(function(r){l.onWebCryptoError(r,e,t,n,o)})}},e.prototype.onWebCryptoError=function(e,t,n,r,i){this.config.enableSoftwareAES?(s.logger.log(
                                                                                                                                        "WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(s.logger.error( "decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var
                                                                                                                                        e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=p}, "./src/crypt/aes-decryptor.js": function(e,t,n){
                                                                                                                                        "use strict";function r(e){var t=e.byteLength,n=t&&new DataView(e).getUint8(t-1);return n?e.slice(0,t-n):e}Object.defineProperty(t,
                                                                                                                                        "__esModule",{value:!0}),t.removePadding=r;var i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new
                                                                                                                                        Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new
                                                                                                                                        Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new
                                                                                                                                        Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new
                                                                                                                                        Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],p=s[3],f=new
                                                                                                                                        Uint32Array(256),d=0,h=0,y=0;for(y=0;y<256;y++)f[y]=y<128?y<<1:y<<1^283;for(y=0;y<256;y++){var v=h^h<<1^h<<2^h<<3^h<<4;v=v>>>8^255&v^99,e[d]=v,t[v]=d;var g=f[d],m=f[g],b=f[m],_=257*f[v]^16843008*v;r[d]=_
                                                                                                                                        <<24|_>>>8,i[d]=_
                                                                                                                                            <<16|_>>>16,a[d]=_
                                                                                                                                                <<8|_>>>24,o[d]=_,_=16843009*b^65537*m^257*g^16843008*d,l[v]=_
                                                                                                                                                    <<24|_>>>8,u[v]=_
                                                                                                                                                        <<16|_>>>16,c[v]=_
                                                                                                                                                            <<8|_>>>24,p[v]=_,d?(d=g^f[f[f[b^g]]],h^=f[f[h]]):d=h=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r
                                                                                                                                                                <t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var
                                                                                                                                                                    i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error( "Invalid aes key size="+i);var
                                                                                                                                                                    a,o,s,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),p=this.invKeySchedule=new
                                                                                                                                                                    Uint32Array(u),f=this.sBox,d=this.rcon,h=this.invSubMix,y=h[0],v=h[1],g=h[2],m=h[3];for(a=0;a<u;a++)a<i?s=c[a]=t[a]:(l=s,a%i==0?(l=l<<8|l>>>24,l=f[l>>>24]
                                                                                                                                                                    <<24|f[l>>>16&255]
                                                                                                                                                                        <<16|f[l>>>8&255]
                                                                                                                                                                            <<8|f[255&l],l^=d[a/i|0]<<24):i>6&&a%i==4&&(l=f[l>>>24]
                                                                                                                                                                                <<24|f[l>>>16&255]
                                                                                                                                                                                    <<16|f[l>>>8&255]
                                                                                                                                                                                        <<8|f[255&l]),c[a]=s=(c[a-i]^l)>>>0);for(o=0;o
                                                                                                                                                                                            <u;o++)a=u-o,l=3&o?c[a]:c[a-4],p[o]=o<4||a<=4?l:y[f[l>>>24]]^v[f[l>>>16&255]]^g[f[l>>>8&255]]^m[f[255&l]],p[o]=p[o]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return
                                                                                                                                                                                                e
                                                                                                                                                                                                <<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,n,i){for(var a,o,s,l,u,c,p,f,d,h,y,v,g,m,b=this.keySize+6,_=this.invKeySchedule,E=this.invSBox,k=this.invSubMix,T=k[0],A=k[1],w=k[2],S=k[3],P=this.uint8ArrayToUint32Array_(n),O=P[0],C=P[1],R=P[2],x=P[3],I=new
                                                                                                                                                                                                    Int32Array(e),D=new Int32Array(I.length),M=this.networkToHostOrderSwap;t
                                                                                                                                                                                                    <I.length;){for(d=M(I[t]),h=M(I[t+1]),y=M(I[t+2]),v=M(I[t+3]),u=d^_[0],c=v^_[1],p=y^_[2],f=h^_[3],g=4,m=1;m<b;m++)a=T[u>>>24]^A[c>>16&255]^w[p>>8&255]^S[255&f]^_[g],o=T[c>>>24]^A[p>>16&255]^w[f>>8&255]^S[255&u]^_[g+1],s=T[p>>>24]^A[f>>16&255]^w[u>>8&255]^S[255&c]^_[g+2],l=T[f>>>24]^A[u>>16&255]^w[c>>8&255]^S[255&p]^_[g+3],u=a,c=o,p=s,f=l,g+=4;a=E[u>>>24]
                                                                                                                                                                                                        <<24^E[c>>16&255]
                                                                                                                                                                                                            <<16^E[p>>8&255]
                                                                                                                                                                                                                <<8^E[255&f]^_[g],o=E[c>>>24]
                                                                                                                                                                                                                    <<24^E[p>>16&255]
                                                                                                                                                                                                                        <<16^E[f>>8&255]
                                                                                                                                                                                                                            <<8^E[255&u]^_[g+1],s=E[p>>>24]
                                                                                                                                                                                                                                <<24^E[f>>16&255]
                                                                                                                                                                                                                                    <<16^E[u>>8&255]
                                                                                                                                                                                                                                        <<8^E[255&c]^_[g+2],l=E[f>>>24]
                                                                                                                                                                                                                                            <<24^E[u>>16&255]
                                                                                                                                                                                                                                                <<16^E[c>>8&255]
                                                                                                                                                                                                                                                    <<8^E[255&p]^_[g+3],g+=3,D[t]=M(a^O),D[t+1]=M(l^C),D[t+2]=M(s^R),D[t+3]=M(o^x),O=d,C=h,R=y,x=v,t+=4}return
                                                                                                                                                                                                                                                        i?r(D.buffer):D.buffer},e.prototype.destroy=function(){this.key=void
                                                                                                                                                                                                                                                        0,this.keySize=void
                                                                                                                                                                                                                                                        0,this.ksRows=void
                                                                                                                                                                                                                                                        0,this.sBox=void
                                                                                                                                                                                                                                                        0,this.invSBox=void
                                                                                                                                                                                                                                                        0,this.subMix=void
                                                                                                                                                                                                                                                        0,this.invSubMix=void
                                                                                                                                                                                                                                                        0,this.keySchedule=void
                                                                                                                                                                                                                                                        0,this.invKeySchedule=void
                                                                                                                                                                                                                                                        0,this.rcon=void
                                                                                                                                                                                                                                                        0},e}();t.default=i},
                                                                                                                                                                                                                                                        "./src/crypt/fast-aes-key.js": function(e,t,n){
                                                                                                                                                                                                                                                        "use strict";Object.defineProperty(t,
                                                                                                                                                                                                                                                        "__esModule",{value:!0});var
                                                                                                                                                                                                                                                        r=function(){function
                                                                                                                                                                                                                                                        e(e,t){this.subtle=e,this.key=t}return
                                                                                                                                                                                                                                                        e.prototype.expandKey=function(){return
                                                                                                                                                                                                                                                        this.subtle.importKey(
                                                                                                                                                                                                                                                        "raw",this.key,{name:
                                                                                                                                                                                                                                                        "AES-CBC"},!1,[
                                                                                                                                                                                                                                                        "encrypt",
                                                                                                                                                                                                                                                        "decrypt"])},e}();t.default=r},
                                                                                                                                                                                                                                                        "./src/crypt/aes-crypto.js": function(e,t,n){
                                                                                                                                                                                                                                                        "use strict";Object.defineProperty(t,
                                                                                                                                                                                                                                                        "__esModule",{value:!0});var
                                                                                                                                                                                                                                                        r=function(){function
                                                                                                                                                                                                                                                        e(e,t){this.subtle=e,this.aesIV=t}return
                                                                                                                                                                                                                                                        e.prototype.decrypt=function(e,t){return
                                                                                                                                                                                                                                                        this.subtle.decrypt({name:
                                                                                                                                                                                                                                                        "AES-CBC",iv:this.aesIV},t,e)},e}();t.default=r},
                                                                                                                                                                                                                                                        "./src/demux/exp-golomb.js": function(e,t,n){
                                                                                                                                                                                                                                                        "use strict";Object.defineProperty(t,
                                                                                                                                                                                                                                                        "__esModule",{value:!0});var
                                                                                                                                                                                                                                                        r=n(/*!
                                                                                                                                                                                                                                                        ../utils/logger
                                                                                                                                                                                                                                                        */
                                                                                                                                                                                                                                                        "./src/utils/logger.js"),i=function(){function
                                                                                                                                                                                                                                                        e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return
                                                                                                                                                                                                                                                        e.prototype.loadWord=function(){var
                                                                                                                                                                                                                                                        e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new
                                                                                                                                                                                                                                                        Uint8Array(4),i=Math.min(4,t);if(0===i)throw
                                                                                                                                                                                                                                                        new Error(
                                                                                                                                                                                                                                                        "no bytes available");r.set(e.subarray(n,n+i)),this.word=new
                                                                                                                                                                                                                                                        DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var
                                                                                                                                                                                                                                                        t;this.bitsAvailable>e?(this.word
                                                                                                                                                                                                                                                        <<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word
                                                                                                                                                                                                                                                            <<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var
                                                                                                                                                                                                                                                                t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return
                                                                                                                                                                                                                                                                e>32&&r.logger.error("Cannot
                                                                                                                                                                                                                                                                read
                                                                                                                                                                                                                                                                more
                                                                                                                                                                                                                                                                than
                                                                                                                                                                                                                                                                32
                                                                                                                                                                                                                                                                bits
                                                                                                                                                                                                                                                                at
                                                                                                                                                                                                                                                                a
                                                                                                                                                                                                                                                                time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word
                                                                                                                                                                                                                                                                <<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?n
                                                                                                                                                                                                                                                                    <<t|this.readBits(t):n},e.prototype.skipLZ=function(){var
                                                                                                                                                                                                                                                                        e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return
                                                                                                                                                                                                                                                                        this.word
                                                                                                                                                                                                                                                                        <<=e,this.bitsAvailable-=e,e;return
                                                                                                                                                                                                                                                                            this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var
                                                                                                                                                                                                                                                                            e=this.skipLZ();return
                                                                                                                                                                                                                                                                            this.readBits(e+1)-1},e.prototype.readEG=function(){var
                                                                                                                                                                                                                                                                            e=this.readUEG();return
                                                                                                                                                                                                                                                                            1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return
                                                                                                                                                                                                                                                                            1===this.readBits(1)},e.prototype.readUByte=function(){return
                                                                                                                                                                                                                                                                            this.readBits(8)},e.prototype.readUShort=function(){return
                                                                                                                                                                                                                                                                            this.readBits(16)},e.prototype.readUInt=function(){return
                                                                                                                                                                                                                                                                            this.readBits(32)},e.prototype.skipScalingList=function(e){var
                                                                                                                                                                                                                                                                            t,n,r=8,i=8;for(t=0;t
                                                                                                                                                                                                                                                                            <e;t++)0!==i&&(n=this.readEG(),i=(r+n+256)%256),r=0===i?r:i},e.prototype.readSPS=function(){var
                                                                                                                                                                                                                                                                                e,t,n,r,i,a,o,s=0,l=0,u=0,c=0,p=this.readUByte.bind(this),f=this.readBits.bind(this),d=this.readUEG.bind(this),h=this.readBoolean.bind(this),y=this.skipBits.bind(this),v=this.skipEG.bind(this),g=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(p(),e=p(),f(5),y(3),p(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var
                                                                                                                                                                                                                                                                                b=d();if(3===b&&y(1),g(),g(),y(1),h())for(a=3!==b?8:12,o=0;o<a;o++)h()&&m(o<6?16:64)}g();var
                                                                                                                                                                                                                                                                                _=d();if(0===_)d();else
                                                                                                                                                                                                                                                                                if(1===_)for(y(1),v(),v(),t=d(),o=0;o<t;o++)v();g(),y(1),n=d(),r=d(),i=f(1),0===i&&y(1),y(1),h()&&(s=d(),l=d(),u=d(),c=d());var
                                                                                                                                                                                                                                                                                E=[1,1];if(h()&&h()){switch(p()){case
                                                                                                                                                                                                                                                                                1:E=[1,1];break;case
                                                                                                                                                                                                                                                                                2:E=[12,11];break;case
                                                                                                                                                                                                                                                                                3:E=[10,11];break;case
                                                                                                                                                                                                                                                                                4:E=[16,11];break;case
                                                                                                                                                                                                                                                                                5:E=[40,33];break;case
                                                                                                                                                                                                                                                                                6:E=[24,11];break;case
                                                                                                                                                                                                                                                                                7:E=[20,11];break;case
                                                                                                                                                                                                                                                                                8:E=[32,11];break;case
                                                                                                                                                                                                                                                                                9:E=[80,33];break;case
                                                                                                                                                                                                                                                                                10:E=[18,11];break;case
                                                                                                                                                                                                                                                                                11:E=[15,11];break;case
                                                                                                                                                                                                                                                                                12:E=[64,33];break;case
                                                                                                                                                                                                                                                                                13:E=[160,99];break;case
                                                                                                                                                                                                                                                                                14:E=[4,3];break;case
                                                                                                                                                                                                                                                                                15:E=[3,2];break;case
                                                                                                                                                                                                                                                                                16:E=[2,1];break;case
                                                                                                                                                                                                                                                                                255:E=[p()<<8|p(),p()<<8|p()]}}return{width:Math.ceil(16*(n+1)-2*s-2*l),height:(2-i)*(r+1)*16-(i?2:4)*(u+c),pixelRatio:E}},e.prototype.readSliceType=function(){return
                                                                                                                                                                                                                                                                                this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},
                                                                                                                                                                                                                                                                                "./src/demux/adts.js":
                                                                                                                                                                                                                                                                                function(e,t,n){
                                                                                                                                                                                                                                                                                "use strict";function
                                                                                                                                                                                                                                                                                r(e,t,n,r){var
                                                                                                                                                                                                                                                                                i,a,o,s,l,u=navigator.userAgent.toLowerCase(),c=r,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return
                                                                                                                                                                                                                                                                                i=1+((192&t[n+2])>>>6),(a=(60&t[n+2])>>>2)>p.length-1?void
                                                                                                                                                                                                                                                                                e.trigger(y.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid
                                                                                                                                                                                                                                                                                ADTS
                                                                                                                                                                                                                                                                                sampling
                                                                                                                                                                                                                                                                                index:"+a}):(s=(1&t[n+2])
                                                                                                                                                                                                                                                                                <<2,s|=(192&t[n+3])>>>6,d.logger.log("manifest
                                                                                                                                                                                                                                                                                    codec:"+r+",ADTS
                                                                                                                                                                                                                                                                                    data:type:"+i+",sampleingIndex:"+a+"["+p[a]+"Hz],channelConfig:"+s),/firefox/i.test(u)?a>=6?(i=5,l=new
                                                                                                                                                                                                                                                                                    Array(4),o=a-3):(i=2,l=new
                                                                                                                                                                                                                                                                                    Array(2),o=a):-1!==u.indexOf("android")?(i=2,l=new
                                                                                                                                                                                                                                                                                    Array(2),o=a):(i=5,l=new
                                                                                                                                                                                                                                                                                    Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&a>=6?o=a-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(a>=6&&1===s||/vivaldi/i.test(u))||!r&&1===s)&&(i=2,l=new
                                                                                                                                                                                                                                                                                    Array(2)),o=a)),l[0]=i
                                                                                                                                                                                                                                                                                    <<3,l[0]|=(14&a)>>1,l[1]|=(1&a)
                                                                                                                                                                                                                                                                                        <<7,l[1]|=s<<3,5===i&&(l[1]|=(14&o)>>1,l[2]=(1&o)
                                                                                                                                                                                                                                                                                            <<7,l[2]|=8,l[3]=0),{config:l,samplerate:p[a],channelCount:s,codec:
                                                                                                                                                                                                                                                                                                "mp4a.40."+i,manifestCodec:c})}function
                                                                                                                                                                                                                                                                                                i(e,t){return
                                                                                                                                                                                                                                                                                                255===e[t]&&240==(246&e[t+1])}function
                                                                                                                                                                                                                                                                                                a(e,t){return
                                                                                                                                                                                                                                                                                                1&e[t+1]?7:9}function
                                                                                                                                                                                                                                                                                                o(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function
                                                                                                                                                                                                                                                                                                s(e,t){return!!(t+1
                                                                                                                                                                                                                                                                                                <e.length&&i(e,t))}function
                                                                                                                                                                                                                                                                                                    l(e,t){if(t+1<e.length&&i(e,t)){var
                                                                                                                                                                                                                                                                                                    n=a(e,t),r=n;t+5<e.length&&(r=o(e,t));var
                                                                                                                                                                                                                                                                                                    s=t+r;if(s===e.length||s+1<e.length&&i(e,s))return!0}return!1}function
                                                                                                                                                                                                                                                                                                    u(e,t,n,i,a){if(!e.samplerate){var
                                                                                                                                                                                                                                                                                                    o=r(t,n,i,a);e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,d.logger.log(
                                                                                                                                                                                                                                                                                                    "parsed codec:"+e.codec+
                                                                                                                                                                                                                                                                                                    ",rate:"+o.samplerate+
                                                                                                                                                                                                                                                                                                    ",nb channel:"+o.channelCount)}}function
                                                                                                                                                                                                                                                                                                    c(e){return
                                                                                                                                                                                                                                                                                                    9216e4/e}function
                                                                                                                                                                                                                                                                                                    p(e,t,n,r,i){var
                                                                                                                                                                                                                                                                                                    s,l,u,c=e.length;if(s=a(e,t),l=o(e,t),(l-=s)>0&&t+s+l
                                                                                                                                                                                                                                                                                                    <=c)return
                                                                                                                                                                                                                                                                                                        u=n+r*i,{headerLength:s,frameLength:l,stamp:u}}function
                                                                                                                                                                                                                                                                                                        f(e,t,n,r,i){var
                                                                                                                                                                                                                                                                                                        a=c(e.samplerate),o=p(t,n,r,i,a);if(o){var
                                                                                                                                                                                                                                                                                                        s=o.stamp,l=o.headerLength,u=o.frameLength,f={unit:t.subarray(n+l,n+l+u),pts:s,dts:s};return
                                                                                                                                                                                                                                                                                                        e.samples.push(f),e.len+=u,{sample:f,length:u+l}}}Object.defineProperty(t,
                                                                                                                                                                                                                                                                                                        "__esModule",{value:!0});var
                                                                                                                                                                                                                                                                                                        d=n(/*!
                                                                                                                                                                                                                                                                                                        ../utils/logger
                                                                                                                                                                                                                                                                                                        */
                                                                                                                                                                                                                                                                                                        "./src/utils/logger.js"),h=n(/*!
                                                                                                                                                                                                                                                                                                        ../errors
                                                                                                                                                                                                                                                                                                        */
                                                                                                                                                                                                                                                                                                        "./src/errors.js"),y=n(/*!
                                                                                                                                                                                                                                                                                                        ../events
                                                                                                                                                                                                                                                                                                        */
                                                                                                                                                                                                                                                                                                        "./src/events.js");t.getAudioConfig=r,t.isHeaderPattern=i,t.getHeaderLength=a,t.getFullFrameLength=o,t.isHeader=s,t.probe=l,t.initTrackConfig=u,t.getFrameDuration=c,t.parseFrameHeader=p,t.appendFrame=f},
                                                                                                                                                                                                                                                                                                        "./src/demux/mp4demuxer.js":
                                                                                                                                                                                                                                                                                                        function(e,t,n){
                                                                                                                                                                                                                                                                                                        "use strict";Object.defineProperty(t,
                                                                                                                                                                                                                                                                                                        "__esModule",{value:!0});var
                                                                                                                                                                                                                                                                                                        r=n(/*!
                                                                                                                                                                                                                                                                                                        ../utils/logger
                                                                                                                                                                                                                                                                                                        */
                                                                                                                                                                                                                                                                                                        "./src/utils/logger.js"),i=n(/*!
                                                                                                                                                                                                                                                                                                        ../events
                                                                                                                                                                                                                                                                                                        */
                                                                                                                                                                                                                                                                                                        "./src/events.js"),a=Math.pow(2,32)-1,o=function(){function
                                                                                                                                                                                                                                                                                                        e(e,t){this.observer=e,this.remuxer=t}return
                                                                                                                                                                                                                                                                                                        e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,n,r,a){if(t&&t.byteLength){var
                                                                                                                                                                                                                                                                                                        o=this.initData=e.parseInitSegment(t);null==n&&(n="mp4a.40.5"
                                                                                                                                                                                                                                                                                                        ),null==r&&(r="avc1.42e01e"
                                                                                                                                                                                                                                                                                                        );var
                                                                                                                                                                                                                                                                                                        s={};o.audio&&o.video?s.audiovideo={container:
                                                                                                                                                                                                                                                                                                        "video/mp4",codec:n+
                                                                                                                                                                                                                                                                                                        ","+r,initSegment:a?t:null}:(o.audio&&(s.audio={container:
                                                                                                                                                                                                                                                                                                        "audio/mp4",codec:n,initSegment:a?t:null}),o.video&&(s.video={container:
                                                                                                                                                                                                                                                                                                        "video/mp4",codec:r,initSegment:a?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else
                                                                                                                                                                                                                                                                                                        n&&(this.audioCodec=n),r&&(this.videoCodec=r)},e.probe=function(t){return
                                                                                                                                                                                                                                                                                                        e.findBox({data:t,start:0,end:Math.min(t.length,16384)},[
                                                                                                                                                                                                                                                                                                        "moof"]).length>0},e.bin2str=function(e){return
                                                                                                                                                                                                                                                                                                        String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var
                                                                                                                                                                                                                                                                                                        n=e[t]
                                                                                                                                                                                                                                                                                                        <<8|e[t+1];return
                                                                                                                                                                                                                                                                                                            n<0?65536+n:n},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var
                                                                                                                                                                                                                                                                                                            n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return
                                                                                                                                                                                                                                                                                                            n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var
                                                                                                                                                                                                                                                                                                            r,i,a,o,s,l,u,c=[];if(t.data?(l=t.start,o=t.end,t=t.data):(l=0,o=t.byteLength),!n.length)return
                                                                                                                                                                                                                                                                                                            null;for(r=l;r
                                                                                                                                                                                                                                                                                                            <o;)i=e.readUint32(t,r),a=e.bin2str(t.subarray(r+4,r+8)),u=i>1?r+i:o,a===n[0]&&(1===n.length?c.push({data:t,start:r+8,end:u}):(s=e.findBox({data:t,start:r+8,end:u},n.slice(1)),s.length&&(c=c.concat(s)))),r=u;return
                                                                                                                                                                                                                                                                                                                c},e.parseSegmentIndex=function(t){var
                                                                                                                                                                                                                                                                                                                n,r=e.findBox(t,["moov"])[0],i=r?r.end:null,a=0,o=e.findBox(t,["sidx"]);if(!o||!o[0])return
                                                                                                                                                                                                                                                                                                                null;n=[],o=o[0];var
                                                                                                                                                                                                                                                                                                                s=o.data[0];a=0===s?8:16;var
                                                                                                                                                                                                                                                                                                                l=e.readUint32(o,a);a+=4;a+=0===s?8:16,a+=2;var
                                                                                                                                                                                                                                                                                                                u=o.end+0,c=e.readUint16(o,a);a+=2;for(var
                                                                                                                                                                                                                                                                                                                p=0;p
                                                                                                                                                                                                                                                                                                                <c;p++){var
                                                                                                                                                                                                                                                                                                                    f=a,d=e.readUint32(o,f);f+=4;var
                                                                                                                                                                                                                                                                                                                    h=2147483647&d;if(1===(2147483648&d)>>>31)return
                                                                                                                                                                                                                                                                                                                    void
                                                                                                                                                                                                                                                                                                                    console.warn("SIDX
                                                                                                                                                                                                                                                                                                                    has
                                                                                                                                                                                                                                                                                                                    hierarchical
                                                                                                                                                                                                                                                                                                                    references
                                                                                                                                                                                                                                                                                                                    (not
                                                                                                                                                                                                                                                                                                                    supported)");var
                                                                                                                                                                                                                                                                                                                    y=e.readUint32(o,f);f+=4,n.push({referenceSize:h,subsegmentDuration:y,info:{duration:y/l,start:u,end:u+h-1}}),u+=h,f+=4,a=f}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:c,references:n,moovEndOffset:i}},e.parseInitSegment=function(t){var
                                                                                                                                                                                                                                                                                                                    n=[];return
                                                                                                                                                                                                                                                                                                                    e.findBox(t,["moov","trak"]).forEach(function(t){var
                                                                                                                                                                                                                                                                                                                    i=e.findBox(t,["tkhd"])[0];if(i){var
                                                                                                                                                                                                                                                                                                                    a=i.data[i.start],o=0===a?12:20,s=e.readUint32(i,o),l=e.findBox(t,["mdia","mdhd"])[0];if(l){a=l.data[l.start],o=0===a?12:20;var
                                                                                                                                                                                                                                                                                                                    u=e.readUint32(l,o),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var
                                                                                                                                                                                                                                                                                                                    p=e.bin2str(c.data.subarray(c.start+8,c.start+12)),f={soun:"audio",vide:"video"}[p];if(f){var
                                                                                                                                                                                                                                                                                                                    d=e.findBox(t,["mdia","minf","stbl","stsd"]);if(d.length){d=d[0];var
                                                                                                                                                                                                                                                                                                                    h=e.bin2str(d.data.subarray(d.start+12,d.start+16));r.logger.log("MP4Demuxer:"+f+":"+h+"
                                                                                                                                                                                                                                                                                                                    found")}n[s]={timescale:u,type:f},n[f]={timescale:u,id:s}}}}}}),n},e.getStartDTS=function(t,n){var
                                                                                                                                                                                                                                                                                                                    r,i,a;return
                                                                                                                                                                                                                                                                                                                    r=e.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map(function(n){return
                                                                                                                                                                                                                                                                                                                    e.findBox(n,["tfhd"]).map(function(r){var
                                                                                                                                                                                                                                                                                                                    i,a;return
                                                                                                                                                                                                                                                                                                                    i=e.readUint32(r,4),a=t[i].timescale||9e4,e.findBox(n,["tfdt"]).map(function(t){var
                                                                                                                                                                                                                                                                                                                    n,r;return
                                                                                                                                                                                                                                                                                                                    n=t.data[t.start],r=e.readUint32(t,4),1===n&&(r*=Math.pow(2,32),r+=e.readUint32(t,8)),r})[0]/a})})),a=Math.min.apply(null,i),isFinite(a)?a:0},e.offsetStartDTS=function(t,n,r){e.findBox(n,["moof","traf"]).map(function(n){return
                                                                                                                                                                                                                                                                                                                    e.findBox(n,["tfhd"]).map(function(i){var
                                                                                                                                                                                                                                                                                                                    o=e.readUint32(i,4),s=t[o].timescale||9e4;e.findBox(n,["tfdt"]).map(function(t){var
                                                                                                                                                                                                                                                                                                                    n=t.data[t.start],i=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,i-r*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=r*s,i=Math.max(i,0);var
                                                                                                                                                                                                                                                                                                                    o=Math.floor(i/(a+1)),l=Math.floor(i%(a+1));e.writeUint32(t,4,o),e.writeUint32(t,8,l)}})})})},e.prototype.append=function(t,n,r,a){var
                                                                                                                                                                                                                                                                                                                    o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var
                                                                                                                                                                                                                                                                                                                    s,l=this.initPTS;if(void
                                                                                                                                                                                                                                                                                                                    0===l){var
                                                                                                                                                                                                                                                                                                                    u=e.getStartDTS(o,t);this.initPTS=l=u-n,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,r,a,t)},e.prototype.destroy=function(){},e}();t.default=o},"./src/demux/aacdemuxer.js":
                                                                                                                                                                                                                                                                                                                    function(e,t,n){"use
                                                                                                                                                                                                                                                                                                                    strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var
                                                                                                                                                                                                                                                                                                                    r=n(/*!
                                                                                                                                                                                                                                                                                                                    ./adts
                                                                                                                                                                                                                                                                                                                    */"./src/demux/adts.js"),i=n(/*!
                                                                                                                                                                                                                                                                                                                    ../utils/logger
                                                                                                                                                                                                                                                                                                                    */"./src/utils/logger.js"),a=n(/*!
                                                                                                                                                                                                                                                                                                                    ../demux/id3
                                                                                                                                                                                                                                                                                                                    */"./src/demux/id3.js"),o=function(){function
                                                                                                                                                                                                                                                                                                                    t(e,t,n){this.observer=e,this.config=n,this.remuxer=t}return
                                                                                                                                                                                                                                                                                                                    t.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(e){if(!e)return!1;for(var
                                                                                                                                                                                                                                                                                                                    t=a.default.getID3Data(e,0)||[],n=t.length,o=e.length;n
                                                                                                                                                                                                                                                                                                                    <o;n++)if(r.probe(e,n))return
                                                                                                                                                                                                                                                                                                                        i.logger.log(
                                                                                                                                                                                                                                                                                                                        "ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,n,o,s){for(var
                                                                                                                                                                                                                                                                                                                        l=this._audioTrack,u=a.default.getID3Data(t,0)||[],c=a.default.getTimeStamp(u),p=e.isFinite(c)?90*c:9e4*n,f=0,d=p,h=t.length,y=u.length,v=[{pts:d,dts:d,data:u}];y<h-1;)if(r.isHeader(t,y)&&y+5<h){r.initTrackConfig(l,this.observer,t,y,l.manifestCodec);var
                                                                                                                                                                                                                                                                                                                        g=r.appendFrame(l,t,y,p,f);if(!g){i.logger.log(
                                                                                                                                                                                                                                                                                                                        "Unable to parse AAC frame");break}y+=g.length,d=g.sample.pts,f++}else
                                                                                                                                                                                                                                                                                                                        a.default.isHeader(t,y)?(u=a.default.getID3Data(t,y),v.push({pts:d,dts:d,data:u}),y+=u.length):y++;this.remuxer.remux(l,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},n,o,s)},t.prototype.destroy=function(){},t}();t.default=o}).call(this,n(/*!
                                                                                                                                                                                                                                                                                                                        ./src/polyfills/number
                                                                                                                                                                                                                                                                                                                        */
                                                                                                                                                                                                                                                                                                                        "./src/polyfills/number.js").Number)},
                                                                                                                                                                                                                                                                                                                        "./src/polyfills/number.js":
                                                                                                                                                                                                                                                                                                                        function(e,t,n){
                                                                                                                                                                                                                                                                                                                        "use strict";Object.defineProperty(t,
                                                                                                                                                                                                                                                                                                                        "__esModule",{value:!0});var
                                                                                                                                                                                                                                                                                                                        r=n(/*!
                                                                                                                                                                                                                                                                                                                        ../utils/get-self-scope
                                                                                                                                                                                                                                                                                                                        */
                                                                                                                                                                                                                                                                                                                        "./src/utils/get-self-scope.js"),i=r.getSelfScope(),a=i.Number;t.Number=a,a.isFinite=a.isFinite||function(e){return
                                                                                                                                                                                                                                                                                                                        "number"==typeof
                                                                                                                                                                                                                                                                                                                        e&&isFinite(e)}}}))(self);