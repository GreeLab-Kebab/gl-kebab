import {
    Application
} from 't3js';
import {
    AdFormat
} from '../../core';
import formatTemplateDefault from '../../core/partials/format-simple.html';

/**
 * @see DFP template: https://admanager.google.com/6556#creatives/custom_native_style/detail/styleid=267938
 */
class AdImpressionPixel extends AdFormat {
    constructor() {
        super(...arguments);
        this.template = null;
    }
    buildFormat() {
        // don't bother appending new HTML from a nunjucks template
        // because we just want the 5x5 to load to trigger impression behavior
        this.element.classList.remove('js-hidden');
        this.element.classList.add(`ad-flexible--${this.formatType}`, `ad-flexible--${this.ad.creativeId}`);
        this.context.application.broadcast(`ad-content-rendered-${this.config.wid}`);
        // also we have no need for a dfpClickTracker
    }
}
AdImpressionPixel.formatType = 'impression_pixel';
AdImpressionPixel.moduleTemplate = formatTemplateDefault;
Application.addModule(`ad-format-${AdImpressionPixel.formatType}`, AdImpressionPixel.generateModule());

export {
    AdImpressionPixel
};