import random from '../random';

export default {
    /**
     * Mixes buzz object and random metadata variation.
     * @param {Object} buzz - buzz object.
     * @returns {Object} - buzz or new object with modified properties.
     */
    pickVariation(buzz = {}) {
        if (!Array.isArray(buzz.metadata_variations) || !buzz.metadata_variations.length) {
            return buzz;
        }

        const variation = random.choice(buzz.metadata_variations);

        let result = {
            variationId: variation.id,
        };
        for (let key in buzz) {
            if (buzz.hasOwnProperty(key)) {
                let value = buzz[key];
                result[key] = key === 'id' ? value : (variation[key] || value);
            }
        }

        return result;
    }
};