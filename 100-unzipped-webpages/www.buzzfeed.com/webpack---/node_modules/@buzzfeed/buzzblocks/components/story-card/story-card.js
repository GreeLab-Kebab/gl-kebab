import {
    Application
} from 't3js';
import {
    name as viewable
} from '../../js/behaviors/viewable';
import {
    name as lazyImageBackground
} from '../../js/behaviors/lazy-image-background';
import {
    name as lazyImage
} from '../../js/behaviors/lazy-image';
import {
    name as OneLinkPost
} from '../../js/behaviors/one-link-post';
import '../post-badge/post-badge';

function generateModule() {
    const Cls = this; // since this is a static class method, `this` is a class itself

    return (context) => {
        return new Cls(context);
    };
}

class StoryCard {
    constructor() {
        this.behaviors = [
            lazyImageBackground,
            viewable,
            lazyImage,
            OneLinkPost,
        ];
    }

    init() {}
    destroy() {}
}

StoryCard.generateModule = generateModule;

Application.addModule('story-card', StoryCard.generateModule());

export {
    StoryCard,
    generateModule
};