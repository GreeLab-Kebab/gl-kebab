(function() {
    if (window.navigator && window.navigator.userAgent) {
        var e = window.navigator.userAgent;
        if (-1 < e.indexOf("KTXN") || -1 < e.indexOf("PTST") || -1 < e.indexOf("GomezAgent")) return
    }
    var h = function(a) {
            for (var b = a.length - 1; 0 < b; b--) {
                var d = Math.floor(Math.random() * (b + 1)),
                    f = a[b];
                a[b] = a[d];
                a[d] = f
            }
            return a
        },
        b = {
            imagePaths: ["/i/p/97/81/60/70/60/9781607060765_180X180.jpg-58bcda73102e6b6186e6d273ad992e35a46bbf36-optim-180x180.jpg", "/i/p/00/03/98/97/78/0003989778424_180X180.jpg-d4593e44811ac04e3ee3c2fcc5421dfbfa7c5db3-optim-180x180.jpg",
                "/i/p/00/89/80/78/00/0089807800104_180X180.jpg-2d81b4cfc0c66323bb87dd09c24144d86ed61ec0-optim-180x180.jpg", "/i/p/00/01/11/20/19/0001112019909_180X180.jpg-b9837ecfb723ea752680fed2f5ba200e9c325fbc-optim-180x180.jpg", "/i/p/00/01/11/20/05/0001112005701_180X180.jpg-42998ba8d54965236fd40f0584c424d0a4e8e3b0-optim-180x180.jpg"
            ],
            dynamicPaths: ["/random", "/randomLong"],
            imageList: [],
            myEvents: [],
            imagesLoaded: 0,
            calculateTiming: function(a, c) {
                c = c ? (new URL(a.name)).hostname : a.name.replace(/^.*\/\//, "").replace(/\/.*$/,
                    "") + "-" + a.name.replace(/^.*[\\\/]/, "");
                b.setTimer({
                    name: "t_" + c + "_dnsTime",
                    start: a.domainLookupStart,
                    end: a.domainLookupEnd
                });
                b.setTimer({
                    name: "t_" + c + "_connectTime",
                    start: a.connectStart,
                    end: a.connectEnd
                });
                b.setTimer({
                    name: "t_" + c + "_ttfbTime",
                    start: a.requestStart,
                    end: a.responseStart
                });
                b.setTimer({
                    name: "t_" + c + "_transferTime",
                    start: a.responseStart,
                    end: a.responseEnd
                })
            },
            loadImages: function() {
                window.performance && window.performance.getEntriesByType && window.localStorage && null === window.localStorage.getItem("tbCDNTest") &&
                    window.TB_CDN_Config && window.TB_CDN_Config.DomainList && (window.localStorage.setItem("tbCDNTest", !0), window.TB_CDN_Config && window.TB_CDN_Config.DynamicDomainList ? (b.runTests(window.TB_CDN_Config.DomainList, b.imagePaths, 3), b.runTests(window.TB_CDN_Config.DynamicDomainList, b.dynamicPaths, b.dynamicPaths.length)) : b.runTests(window.TB_CDN_Config.DomainList, b.imagePaths, b.imagePaths.length), window.setTimeout(b.sendBeacon, 5E3))
            },
            runTests: function(a, c, d) {
                a = h(a);
                c = h(c);
                for (var f = 0; f < a.length; f++) {
                    var e = 0,
                        k;
                    for (k in c) {
                        var g = new Image;
                        g.onload = b.imageLoaded;
                        g.src = "https://" + a[f] + c[k];
                        b.imageList.push(g.src);
                        e++;
                        if (e >= d) break
                    }
                }
            },
            imageLoaded: function() {
                b.imagesLoaded++;
                b.imagesLoaded >= b.imageList.length && b.sendBeacon()
            },
            sendBeacon: function() {
                if (window.localStorage && null === window.localStorage.getItem("tbCDNTestBeaconFired")) {
                    window.localStorage.setItem("tbCDNTestBeaconFired", !0);
                    var a = window.performance.getEntriesByType("resource");
                    for (d in a)
                        if (0 <= b.imageList.indexOf(a[d].name)) b.calculateTiming(a[d]);
                        else if (window.TB_CDN_Config && window.TB_CDN_Config.MonitorDomains && window.TB_CDN_Config.MonitorDomains.length)
                        for (var c in TB_CDN_Config.MonitorDomains) 0 <= a[d].name.indexOf(TB_CDN_Config.MonitorDomains[c]) && b.calculateTiming(a[d], !0);
                    a = document.referrer || "";
                    var d = document.location.toString() || "";
                    c = "beacon.walmart.com";
                    window.TB_CDN_Config.BeaconHost && (c = window.TB_CDN_Config.BeaconHost);
                    document.createElement("img").src = "https://" + c + "/ll.gif?v=1&t_other=" + b.myEvents.join(",") + "&u=" + d + "&r=" + a
                }
            },
            setTimer: function(a) {
                if (!a.name ||
                    0 >= a.name.length || !a.start || 0 >= a.start || !a.end || 0 >= a.end) return !1;
                b.myEvents.push(a.name + "|" + (parseInt(a.end) - parseInt(a.start)));
                return !0
            }
        };
    "complete" === document.readyState ? b.loadImages() : window.addEventListener ? window.addEventListener("load", b.loadImages, !1) : window.attachEvent && window.attachEvent("onload", b.loadImages)
})();