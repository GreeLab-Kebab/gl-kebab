import {
    aj as e,
    k as t,
    g as a,
    U as n,
    aa as s,
    a9 as o,
    D as d,
    l as r,
    C as c,
    b as i,
    ah as l,
    X as g,
    ai as m,
    A as f,
    ac as u,
    a5 as y,
    a6 as _,
    ag as p,
    a7 as b,
    a8 as v,
    ak as h
} from "./vanilla.common-chunks.esm.6e0de5cd.js";
var C = "av_a",
    x = {
        "breakpoint-l": "1024px",
        "nd-message-order-by": "as_a",
        "nd-message-order-by-before": "as_b",
        "order-by-content-first-part": "as_c",
        "nd-message-order-by-clost-btn": "as_e",
        "order-by-content-second-part": "as_f",
        "text-bold": "as_g",
        ndMessageOrderBy: "as_a",
        ndMessageOrderByBefore: "as_b",
        orderByContentFirstPart: "as_c",
        ndMessageOrderByClostBtn: "as_e",
        orderByContentSecondPart: "as_f",
        textBold: "as_g"
    },
    B = [{
        id: "nd-message-on",
        hasShareStyle: !0
    }, {
        id: "nd-message-off",
        hasShareStyle: !0
    }, {
        id: "nd-message-on-mixcart",
        hasShareStyle: !0
    }, {
        id: "nd-message-order-by",
        hasShareStyle: !0
    }, {
        id: "nd-message-wont-get-nextday",
        hasShareStyle: !0
    }, {
        id: "nd-message-save-later-succeed",
        hasShareStyle: !1
    }, {
        id: "nd-message-save-later-fail",
        hasShareStyle: !1
    }],
    I = {
        ndMessageOn: {
            cssName: {
                "breakpoint-l": "1024px",
                "nd-message-on": "aq_a",
                "nd-message-on-content": "aq_b",
                "nd-message-on-close": "aq_c",
                "nd-content-title": "aq_e",
                "nd-content-features": "aq_f",
                "nd-on-header": "aq_g",
                "nd-on-bullet": "aq_h",
                "nd-mb-clock-icon": "aq_i",
                ndMessageOn: "aq_a",
                ndMessageOnContent: "aq_b",
                ndMessageOnClose: "aq_c",
                ndContentTitle: "aq_e",
                ndContentFeatures: "aq_f",
                ndOnHeader: "aq_g",
                ndOnBullet: "aq_h",
                ndMbClockIcon: "aq_i"
            },
            contentId: "nd-message-on",
            clostBtnClassName: "nd-message-on-close",
            lastFocusEleId: "nd-on-last-part"
        },
        ndMessageOff: {
            cssName: {
                "breakpoint-l": "1024px",
                oceanNd: "#008292",
                blueCta: "#0065FF",
                "nd-message-off": "ao_a",
                "nd-message-off-content": "ao_b",
                "nd-message-bold": "ao_c",
                "nd-message-off-close-btn": "ao_e",
                "nd-text-color-ocean": "ao_f",
                "nd-text-size-normal": "ao_g",
                ndMessageOff: "ao_a",
                ndMessageOffContent: "ao_b",
                ndMessageBold: "ao_c",
                ndMessageOffCloseBtn: "ao_e",
                ndTextColorOcean: "ao_f",
                ndTextSizeNormal: "ao_g"
            },
            contentId: "nd-message-off",
            clostBtnClassName: "nd-message-off-close-btn",
            lastFocusEleId: "nd-message-off-last-part"
        },
        ndMessageOnMixcart: {
            cssName: {
                "breakpoint-l": "1024px",
                oceanNd: "#008292",
                blueCta: "#0065FF",
                "nd-message-on-mixcart": "ap_a",
                "nd-message-on-mixcart-content": "ap_b",
                "text-bold": "ap_c",
                "nd-message-on-mixcart-close": "ap_e",
                "nd-text-color-ocean": "ap_f",
                "nd-message-italic": "ap_g",
                "nd-message-normal": "ap_h",
                "nd-message-on-mixcart-button": "ap_i",
                white: "ap_j",
                "content-in-button": "ap_k",
                black: "ap_l",
                "horizon-line": "ap_m",
                ndMessageOnMixcart: "ap_a",
                ndMessageOnMixcartContent: "ap_b",
                textBold: "ap_c",
                ndMessageOnMixcartClose: "ap_e",
                ndTextColorOcean: "ap_f",
                ndMessageItalic: "ap_g",
                ndMessageNormal: "ap_h",
                ndMessageOnMixcartButton: "ap_i",
                contentInButton: "ap_k",
                horizonLine: "ap_m"
            },
            contentId: "nd-message-on-mixcart",
            clostBtnClassName: "nd-message-on-mixcart-close",
            lastFocusEleId: "nd-mixcart-2nd-part"
        },
        ndMessageOrderBy: {
            cssName: x,
            contentId: "nd-message-order-by",
            clostBtnClassName: "nd-message-order-by-clost-btn",
            lastFocusEleId: "nd-order-by-last-part"
        },
        ndMessageWontGetNextDay: {
            cssName: {
                "breakpoint-l": "1024px",
                oceanNd: "#008292",
                blueCta: "#0065FF",
                "nd-message-wont-get-nextday": "ar_a",
                "nd-message-wont-get-nd-delivery-content": "ar_b",
                "text-bold": "ar_c",
                "nd-message-wont-get-nd-delivery-close": "ar_e",
                "nd-text-color-ocean": "ar_f",
                "nd-message-normal": "ar_g",
                ndMessageWontGetNextday: "ar_a",
                ndMessageWontGetNdDeliveryContent: "ar_b",
                textBold: "ar_c",
                ndMessageWontGetNdDeliveryClose: "ar_e",
                ndTextColorOcean: "ar_f",
                ndMessageNormal: "ar_g"
            },
            contentId: "nd-message-wont-get-nextday",
            clostBtnClassName: "nd-message-wont-get-nd-delivery-close",
            lastFocusEleId: "wont-get-nd-last-part"
        },
        ndMessageSaveLaterSucceed: {
            cssName: {
                "nd-message-save-later-succeed": "au_a",
                "save-later-succeed-content": "au_b",
                ndMessageSaveLaterSucceed: "au_a",
                saveLaterSucceedContent: "au_b"
            },
            contentId: "nd-message-save-later-succeed",
            clostBtnClassName: ""
        },
        ndMessageSaveLaterFail: {
            cssName: {
                "nd-message-save-later-fail": "at_a",
                "save-later-fail-content": "at_b",
                ndMessageSaveLaterFail: "at_a",
                saveLaterFailContent: "at_b"
            },
            contentId: "nd-message-save-later-fail",
            clostBtnClassName: ""
        }
    },
    M = function(e, t) {
        (t ? e.getById("nd-message") : e.getById("nd-message-close")).focus()
    },
    S = function(e, a, n) {
        document.body.appendChild(n), e.querySelector(".js-content").setAttribute("aria-hidden", !0), window.addEventListener("keydown", function(n) {
            ! function(e, a, n) {
                var s = I[n].lastFocusEleId;
                e.keyCode === t.TAB && document.activeElement === a.getById(s) && (e.preventDefault(), a.getById("nd-message-close").focus())
            }(n, e, a)
        })
    },
    N = function() {
        document.querySelector(".js-content").setAttribute("aria-hidden", !1)
    },
    k = function(e, a, n) {
        var s = function() {
            a.setAttribute("hidden", !0), n.setAttribute("hidden", !0), N()
        };
        e.addEventListener("click", function() {
            s()
        }), e.addEventListener("keypress", function(e) {
            e.preventDefault(), e.keyCode !== t.ENTER && e.keyCode !== t.SPACE || s()
        }), n.addEventListener("click", function() {
            s()
        })
    },
    A = function(e) {
        return "boolean" == typeof e || "number" == typeof e ? e : "true" === e.toLowerCase()
    },
    O = function(e, t) {
        if (!e) return !0;
        var s = 1e3 * Number(a(n, "ccm.header-footer-app.nextDay.eduMessageExpirationTime", "1800"));
        return t - Number(e) > s
    },
    E = function(t) {
        var a = Date.now(),
            n = "nd_edu_msg_lastshownts_" + t,
            s = e.get(n);
        return !!O(s, a) && (e.set(n, a), !0)
    },
    F = function(e, t, a, n) {
        var d = e.getById("cut-off-before-10am"),
            r = e.getById("cut-off-normal"),
            c = e.getById("nd-message");
        if (n) {
            e.getById("deliverytime-before").textContent = s(a), d.removeAttribute("hidden"), r.setAttribute("hidden", !0);
            var i = x["nd-message-order-by-before"];
            e.addClass(c, i)
        } else {
            var l = e.getById("cutofftime-normal"),
                g = e.getById("deliverytime-normal");
            l.textContent = o(t) + " on " + s(t), g.textContent = s(a), r.removeAttribute("hidden"), d.setAttribute("hidden", !0)
        }
    },
    L = function(e, t, a, n, s, o) {
        var g = d.create(),
            m = g.getById("nd-message");
        m.className = "";
        var f = I[e].contentId,
            u = I[e].cssName;
        g.addClass(m, u[f]),
            function(e, t) {
                for (var a, n, s, o = 0; o < B.length; o++) t !== B[o].id ? (a = e.getById(B[o].id)) && a.setAttribute("hidden", !0) : (n = e.getById("nd-message"), B[o].hasShareStyle && (s = C, e.addClass(n, s)))
            }(g, f);
        var y = g.getById(f);
        y.removeAttribute("hidden"), m.removeAttribute("hidden");
        var _ = g.getById("nd-cover");
        if (a) {
            y.removeAttribute("hidden"), g.getById("nd-message-close").setAttribute("hidden", !0);
            var p = g.querySelector("[data-tl-id=nd-toggle-bar]");
            p.parentNode.insertBefore(m, p.nextSibling), _.setAttribute("hidden", !0), M(g, a)
        } else if (t) {
            F(g, n, s);
            var b = g.getById("order-by-close-btn");
            g.getById("nd-message-close").setAttribute("hidden", !0), _.removeAttribute("hidden"), k(b, m, _)
        } else {
            var v = g.getById("nd-message-close"),
                h = I[e].clostBtnClassName;
            v.className = "", g.addClass(v, u[h]), "ndMessageOrderBy" === e && F(g, n, s, o), _.removeAttribute("hidden"), k(v, m, _), S(g, e, m), M(g, a)
        }
        var x = r("Header"),
            N = {
                cart: {
                    em: 0 === parseInt(c.get("cart-count"))
                },
                message: e,
                postCutoff: "ndMessageOrderBy" === e || "ndMessageOff" === e,
                pageTitle: i().basePath
            };
        x.tagAction(l(N))
    },
    q = function(e, t) {
        L("ndMessageSaveLaterSucceed", !1, !0);
        var n = a(e, "updatedCartItemCount");
        Number.isNaN(n) || (t({
            totalCount: n
        }), c.set("cart-item-count", n))
    },
    D = function() {
        L("ndMessageSaveLaterFail", !1, !0)
    },
    w = function(e, t, s, o) {
        if (e) {
            var d = a(n, "ccm.header-footer-app.nextDay.saveForLaterApiUrl", "/cart/");
            g.fetch(d + e + "/items/bulkTransfer", {
                method: "PUT",
                format: "json",
                headers: {
                    "Content-Type": "application/json",
                    Accept: "application/json"
                },
                onSuccess: function(e) {
                    s(e, t)
                },
                onError: o
            })
        }
    },
    T = function(e, s, o, r, c, i) {
        var l = a(e, "cartStatus.nextDayEligibility", !1),
            g = a(e, "cartStatus.cartEmpty", !1);
        if (s)
            if (!0 === g || !0 === l && !1 === g) E("welcome") && c && i && L("ndMessageOn", !1, !1);
            else {
                if (!E("mixcart") || !c) return;
                if (!A(a(n, "ccm.header-footer-app.nextDay.enableSaveForLaterCall", "true"))) return void L("ndMessageWontGetNextDay", !1, !1);
                L("ndMessageOnMixcart", !1, !1),
                    function(e, s) {
                        var o = d.create(),
                            r = o.getById("keep-shopping"),
                            c = o.getById("nd-message"),
                            i = o.getById("nd-cover");
                        if (r.addEventListener("click", function() {
                                c.setAttribute("hidden", !0), i.setAttribute("hidden", !0), N()
                            }), r.addEventListener("keypress", function(e) {
                                e.preventDefault(), e.keyCode !== t.ENTER && e.keyCode !== t.SPACE || (c.setAttribute("hidden", !0), i.setAttribute("hidden", !0), N())
                            }), A(a(n, "ccm.header-footer-app.nextDay.enableSaveForLaterCall", "true"))) {
                            var l = o.getById("save-items-for-later");
                            l.addEventListener("click", function() {
                                w(e, s, q, D)
                            }), l.addEventListener("keypress", function(a) {
                                a.preventDefault(), a.keyCode !== t.ENTER && a.keyCode !== t.SPACE || w(e, s, q, D)
                            })
                        }
                    }(o, r)
            }
        else !0 === l && !1 === g && E("ndcart") && c && L("ndMessageOff", !1, !1)
    },
    j = function(e, t, s, o, d) {
        if (t) {
            var r = a(n, "ccm.header-footer-app.nextDay.preCartApiUrl", "/cart/lite/");
            g.fetch(r + t + "/nextDay", {
                method: "GET",
                format: "json",
                headers: {
                    "Content-Type": "application/json",
                    Accept: "application/json"
                },
                onSuccess: function(a) {
                    T(a, e, t, s, o, d)
                }
            })
        }
    };
export default function(e) {
    var t = c.get("nd_sess"),
        s = m(t),
        o = f(t),
        d = A(a(n, "ccm.header-footer-app.nextDay.enableMessageBox", "true")),
        r = function(e) {
            var t = e.basePath;
            return "Home" !== t && "Bundles" !== t && "Category" !== t && "Cart" !== t && "Checkout" !== t && "Thank you" !== t && "Account" !== t && "Reviews" !== t && "Unknown" !== t
        }(i()),
        l = function(t) {
            var a = parseInt(t.cutoffTime) * y.secondsInMs,
                n = parseInt(t.targetDate) * y.secondsInMs,
                c = s ? "on" : "off",
                i = function(e) {
                    var t = localStorage.getItem("nd_toggle_state");
                    return !(!t && "off" === e) && e !== t
                }(c);
            i && function(e) {
                localStorage.setItem("nd_toggle_state", e)
            }(c);
            var l = _(a, n);
            if (o && l !== p && l !== b && d)
                if (s)
                    if (l === v) {
                        if (E("order_by") && i) {
                            var g = h(a);
                            L("ndMessageOrderBy", !1, !1, a, n, g)
                        }
                    } else {
                        if (!t.crtId && E("welcome") && i && r) return void L("ndMessageOn", !1, !1);
                        t.crtId && i && j(s, t.crtId, e, i, r)
                    }
            else i && E("off") && j(s, t.crtId, e, i, r)
        };
    u(function() {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
        l(e)
    })
}
//# sourceMappingURL=http://127.0.0.1:3000/js/vanilla.index.esm.358c938d.js.map