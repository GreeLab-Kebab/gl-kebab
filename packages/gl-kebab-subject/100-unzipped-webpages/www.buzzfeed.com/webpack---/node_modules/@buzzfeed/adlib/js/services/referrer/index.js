const referrerMap = {
    'pinterest': 'pinterest',
    'twitter': 'twitter',
    't.co': 'twitter',
    'facebook': 'facebook',
    'm.facebook': 'facebook',
    'fban': 'facebook',
    'google': 'google',
    'youtube': 'youtube',
};

export function getReferrer() {
    return mapReferrer(document.referrer) ||
        mapInAppReferrer(navigator.userAgent) ||
        mapReferrerQuery(window.location.search) ||
        '';
}

export function mapReferrer(str) {
    let referrer = (str.match(/(m\.)?facebook|t\.co|pinterest|google|youtube/i) || [])[0];
    if (referrer) {
        referrer = referrer.toLowerCase();
    }
    return referrerMap[referrer];
}

export function mapInAppReferrer(str) {
    let referrer = (str.match(/fban|twitter|pinterest|google|youtube/i) || [])[0];
    if (referrer) {
        referrer = referrer.toLowerCase();
    }
    return referrerMap[referrer];
}

export function mapReferrerQuery(str) {
    let referrer = (str.match(/referrer=(\w+)/) || [])[1];
    if (referrer) {
        referrer = referrer.toLowerCase();
    }
    return referrerMap[referrer];
}