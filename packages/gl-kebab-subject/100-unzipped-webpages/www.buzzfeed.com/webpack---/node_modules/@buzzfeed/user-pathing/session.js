const storageKey = key => `bf-user-path-session-${key}`;

/**
 * Wrapper for storing JSON values in session storage.
 */
const jsonStorage = {
    get(key) {
        try {
            return JSON.parse(sessionStorage.getItem(storageKey(key)));
        } catch (e) {}

        return null;
    },
    set(key, value) {
        try {
            sessionStorage.setItem(storageKey(key), JSON.stringify(value));
        } catch (e) {}
    }
};

/**
 * Primitive to store arrays in the session storage
 * @param {String} key - individual key for a list
 */
const list = key => {
    const all = () => jsonStorage.get(key) || [];

    return {
        last() {
            return all().pop();
        },
        add(item) {
            jsonStorage.set(key, [...all(), item]);
        },
        all
    };
};

export const buzzes = list('buzzes');